<?php
    function decode_morse(string $code): string {
        echo "code: $code\n";
        return strtoupper(trim(str_replace("  "," ",preg_replace("/\s(?=[^\s]*[^\s])/","", preg_replace_callback("/[-.]+/",
            function ($matches) {
              $morse = array(" " => "", "a" => ".- ",
              "b" => "-... ", "c" => "-.-. ",
              "d" => "-.. ", "e" => ". ",
              "f" => "..-. ", "g" => "--. ",
              "h" => ".... ", "i" => ".. ",
              "j" => ".--- ", "k" => "-.- ",
              "l" => ".-.. ", "m" => "-- ",
              "n" => "-. ", "o" => "--- ",
              "p" => ".--. ", "q" => "--.- ",
              "r" => ".-. ", "s" => "... ",
              "t" => "- ", "u" => "..- ",
              "v" => "...- ", "w" => ".-- ",
              "x" => "-..- ", "y" => "-.-- ",
              "z" => "--.. ", "." => ".-.-.- ",
              "," => "--..-- ", "?" => "..--.. ",
              "/" => "-..-. ", "@" => ".--.-. ",
              "1" => ".---- ", "2" => "..--- ",
              "3" => "...-- ", "4" => "....- ",
              "5" => "..... ", "6" => "-.... ",
              "7" => "--... ", "8" => "---.. ",
              "9" => "----. ", "0" => "----- ",
              ":" => "---... ", "'" => ".----. ",
              "-" => "-....- ", '"' => ".-..-. ",
              "=" => "-...- ", "(" => "-.--.- ",
              "SOS" => '...---...', '!' => '-.-.--');
              
              $value = array_search($matches[0], array_map('trim',$morse));
              return $value ? $value : $matches[0];
            }, 
            $code)))));
    }

    //Expect HEY JUDE
    echo "output: [".decode_morse('       .... . -.--  .--- ..- -.. . -.-.--')."]\n";
    //echo "output: [".decode_morse('       ...---... -.-.--   - .... .   --.- ..- .. -.-. -.-   -... .-. --- .-- -.   ..-. --- -..-   .--- ..- -- .--. ...   --- ...- . .-.   - .... .   .-.. .- --.. -.--   -.. --- --. .-.-.-')."]\n";
    //echo "output: [".decode_morse('.... . -.--  .--- ..- -.. .')."]\n";
    //echo "output: [".decode_morse('...---...')."]\n";
    //echo "output: [".decode_morse('... --- ...')."]\n";
    //echo "output: [".morse_encoder('SOS')."]\n";